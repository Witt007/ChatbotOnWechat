(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
    typeof define === 'function' && define.amd ? define(['Ix'], factory) :
    (factory(global.Ix = global.Ix || {}));
}(this, (function (exports) {function h(a){return this instanceof h?this:new h(a)};const k=a=>"function"===typeof a,l=a=>null!=a&&Object(a)===a;function m(a){return l(a)&&"number"===typeof a.length}function n(a){return null!=a&&k(a[Symbol.iterator])}function p(a){return l(a)&&!k(a[Symbol.iterator])&&k(a.next)}function u(a){return null!=a&&Object(a)===a&&"function"===typeof a.subscribe}const v=a=>l(a)&&k(a.pipe)&&k(a._read)&&"boolean"===typeof a.readable&&l(a._readableState),w=a=>l(a)&&k(a.end)&&k(a._write)&&"boolean"===typeof a.writable&&l(a._writableState);class x extends Error{constructor(a="The operation has been aborted"){super(a);Object.setPrototypeOf(this,x.prototype);Error.captureStackTrace(this,this.constructor);this.name="AbortError"}get [Symbol.toStringTag](){return"AbortError"}}function y(a){if(a&&a.aborted)throw new x;}Object.defineProperty(x,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return l(a)&&("AbortError"===a.constructor.name||"AbortError"===a[Symbol.toStringTag])}});function z(a){return a}async function A(a){return a};function B(a,b){return"undefined"===typeof b?a:function(c,d){return a.call(b,c,d)}};function C(a){a=Number(a);return isNaN(a)?0:0!==a&&isFinite(a)?(0<a?1:-1)*Math.floor(Math.abs(a)):a};const D=Math.pow(2,53)-1;class E{forEach(a,b){a=B(a,b);b=0;for(const c of this)a(c,b++)}pipe(...a){let b=-1;const c=a.length;let d=this;for(;++b<c;)d=a[b](E.as(d));return d}static as(a){return a instanceof E?a:"string"===typeof a?new F([a],z):n(a)||m(a)?new F(a,z):new F([a],z)}static from(a,b=z,c){b=B(b,c);if(n(a)||m(a))return new F(a,b);if(p(a))return new F({[Symbol.iterator]:()=>a},b);throw new TypeError("Input type not supported");}}E.prototype[Symbol.toStringTag]="IterableX";
Object.defineProperty(E,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"IterableX"!==a[Symbol.toStringTag])}});class F extends E{constructor(a,b){super();this.g=a;this.A=b}*[Symbol.iterator](){let a=0;if(n(this.g))for(var b of this.g)yield this.A(b,a++);else for(b=Math.min(Math.max(C(this.g.length),0),D);a<b;)yield this.A(this.g[a],a++)}}
try{(a=>{if(!a){E.prototype.pipe=function(...c){let d=-1;const f=c.length;let e=this,g;for(;++d<f;)if(g=c[d],"function"===typeof g)e=g(E.as(e));else if(w(g))return{end:c=!0}=c[d+1]||{},v(e)?e.pipe(g,{end:c}):E.as(e).G(b(g)).pipe(g,{end:c});return e};var b=(c,d=c.D||{F:!0})=>d}})("object"===typeof window&&"object"===typeof document&&9===document.nodeType)}catch(a){};const G="function"===typeof Symbol&&Symbol.observable||"@@observable";class H{async forEach(a,b,c){const d=c?new I(this,c):this;let f=0;for await(const e of d)await a.call(b,e,f++,c)}pipe(...a){let b=-1;const c=a.length;let d=this;for(;++b<c;)d=a[b](H.as(d));return d}static from(a,b=A,c){b=B(b,c);if(n(a)||l(a)&&k(a[Symbol.asyncIterator]))return new J(a,b);if(l(a)&&k(a.then))return new K(a,b);if(u(a))return new L(a,b);if(m(a))return new M(a,b);if(p(a))return new J({[Symbol.asyncIterator]:()=>a},b);throw new TypeError("Input type not supported");}static as(a){return a instanceof
H?a:"string"===typeof a?new M([a],A):n(a)||l(a)&&k(a[Symbol.asyncIterator])?new J(a,A):l(a)&&k(a.then)?new K(a,A):u(a)?new L(a,A):m(a)?new M(a,A):new M([a],A)}}H.prototype[Symbol.toStringTag]="AsyncIterableX";Object.defineProperty(H,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"AsyncIterableX"!==a[Symbol.toStringTag])}});
class N{constructor(){this.m=!1;this.v=[];this.i=[]}[Symbol.asyncIterator](){return this}write(a){this._push({type:"value",value:a})}error(a){this._push({type:"error",error:a})}_push(a){if(this.m)throw Error("AsyncSink already ended");if(0<this.i.length){const {resolve:b,reject:c}=this.i.shift();"error"===a.type?c(a.error):b({done:!1,value:a.value})}else this.v.push(a)}next(){if(0<this.v.length){const {type:a,value:b,error:c}=this.v.shift();return"error"===a?Promise.reject(c):Promise.resolve({done:!1,
value:b})}return this.m?Promise.resolve({done:!0}):new Promise((a,b)=>{this.i.push({resolve:a,reject:b})})}end(){for(;0<this.i.length;)this.i.shift().resolve({done:!0});this.m=!0}}class M extends H{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](){let a=0;const b=Math.min(Math.max(C(this.g.length),0),D);for(;a<b;)yield await this.h(this.g[a],a++)}}
class J extends H{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](){let a=0;for await(const b of this.g)yield await this.h(b,a++)}}class K extends H{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](){const a=await this.g;yield await this.h(a,0)}}
class L extends H{constructor(a,b){super();this.C=a;this.h=b}async*[Symbol.asyncIterator](a){function b(){c.error(new x)}y(a);const c=new N,d=this.C.subscribe({next(e){c.write(e)},error(e){c.error(e)},complete(){c.end()}});a&&a.addEventListener("abort",b);let f=0;try{for(let e;!(e=await c.next()).done;)y(a),yield await this.h(e.value,f++)}finally{a&&a.removeEventListener("abort",b),d.unsubscribe()}}}
class I{constructor(a,b){this.g=a;this.u=b}[Symbol.asyncIterator](){return this.g[Symbol.asyncIterator](this.u)}}try{(a=>{if(!a){H.prototype.pipe=function(...c){let d=-1;const f=c.length;let e=this,g;for(;++d<f;)if(g=c[d],"function"===typeof g)e=g(H.as(e));else if(w(g))return{end:c=!0}=c[d+1]||{},v(e)?e.pipe(g,{end:c}):H.as(e).G(b(g)).pipe(g,{end:c});return e};var b=(c,d=c.D||{F:!0})=>d}})("object"===typeof window&&"object"===typeof document&&9===document.nodeType)}catch(a){};function O(a,b){return a>b?1:a<b?-1:0};class P extends E{constructor(a){super();this.g=a}*[Symbol.iterator](){const a=Array.from(this.g),b=a.length,c=Array(b);for(let d=0;d<b;d++)c[d]=d;c.sort(this._getSorter(a));for(const d of c)yield a[d]}thenBy(a,b=O){return new Q(this.g,a,b,!1,this)}thenByDescending(a,b=O){return new Q(this.g,a,b,!0,this)}}
class Q extends P{constructor(a,b,c,d,f){super(a);this.o=b;this.j=c;this.l=d;this.s=f}_getSorter(a,b){const c=a.map(this.o),d=this.j,f=this.s,e=this.l,g=(q,r)=>{const t=d(c[q],c[r]);return 0===t?b?b(q,r):q-r:e?-t:t};return f?f._getSorter(a,g):g}};class R extends H{constructor(a,b){super();this.g=a;this.u=b}[Symbol.asyncIterator](){return this.g[Symbol.asyncIterator](this.u)}};async function S(a,b){y(b);const c=[];for await(const d of b?new R(a,b):a)c.push(d);return c};class T extends H{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){y(a);a=await S(this.g,a);const b=a.length,c=Array(b);for(let d=0;d<b;d++)c[d]=d;c.sort(this._getSorter(a));for(const d of c)yield a[d]}thenBy(a,b=O){return new U(this.g,a,b,!1,this)}thenByDescending(a,b=O){return new U(this.g,a,b,!0,this)}}
class U extends T{constructor(a,b,c,d,f){super(a);this.o=b;this.j=c;this.l=d;this.s=f}_getSorter(a,b){const c=a.map(this.o),d=this.j,f=this.s,e=this.l,g=(q,r)=>{const t=d(c[q],c[r]);return 0===t?b?b(q,r):q-r:e?-t:t};return f?f._getSorter(a,g):g}};var aa={AbortError:x,AsyncSink:N,Iterable:E,AsyncIterable:H,symbolObservable:G};const ba="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;class V extends H{constructor(a){super();this.B=a}[Symbol.asyncIterator](){const a=this.B,b=a.getReader();return W(a,b,ca(b))}}class X extends V{[Symbol.asyncIterator](){var a=this.B;let b;try{b=a.getReader({mode:"byob"})}catch(c){return super[Symbol.asyncIterator]()}a=W(a,b,da(b));a.next();return a}}
async function*W(a,b,c){let d=!1;try{yield*c}catch(f){(d=!0,b)&&await b.cancel(f)}finally{if(b&&(d||await b.cancel(),a.locked))try{b.closed.catch(()=>{}),b.releaseLock()}catch(f){}}}async function*ca(a){let b;for(;!(b=await a.read()).done;)yield b.value}async function*da(a){var b;for(b=yield null;!(b=await ea(a,b)).done;)b=yield b.value}
async function ea(a,b){let c;if("number"===typeof b)c=new ArrayBuffer(b);else if(b instanceof ArrayBuffer)b=(c=b).byteLength;else if(b instanceof ba)b=(c=b).byteLength;else return{done:!0,value:void 0};return await Y(a,c,0,b)}async function Y(a,b,c,d){if(c>=d)return{done:!1,value:new Uint8Array(b,0,d)};const {done:f,value:e}=await a.read(new Uint8Array(b,c,d-c));return(c+=e.byteLength)<d&&!f?await Y(a,e.buffer,c,d):{done:f,value:new Uint8Array(e.buffer,0,c)}};var Z={};Z.AbortError=x;Z.AsyncIterable=H;Z.AsyncIterableReadableByteStream=X;Z.AsyncIterableReadableStream=V;Z.AsyncSink=N;Z.Iterable=E;Z.OrderedAsyncIterable=U;Z.OrderedAsyncIterableBase=T;Z.OrderedIterable=Q;Z.OrderedIterableBase=P;Z.default=aa;Z.fromDOMStream=function(a,b){return b&&"byob"===b.mode?new X(a):new V(a)};Z.symbolObservable=G;h.prototype[Symbol.toStringTag]="__await";Object.defineProperty(h,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"__await"!==a[Symbol.toStringTag])}});Object.assign(arguments[0],Z);}.bind(this))));

//# sourceMappingURL=Ix.dom.esnext.min.js.map

(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
    typeof define === 'function' && define.amd ? define(['IxAsynciterableOperators'], factory) :
    (factory(global.IxAsynciterableOperators = global.IxAsynciterableOperators || {}));
}(this, (function (exports) {function f(a){return this instanceof f?this:new f(a)};function h(a,b){return"undefined"===typeof b?a:function(c,d){return a.call(b,c,d)}};function l(a){return a}async function m(a){return a};const r=a=>"function"===typeof a,t=a=>null!=a&&Object(a)===a;function x(a){return t(a)&&"number"===typeof a.length}function y(a){return null!=a&&r(a[Symbol.iterator])}function aa(a){return t(a)&&!r(a[Symbol.iterator])&&r(a.next)}function ba(a){return null!=a&&Object(a)===a&&"function"===typeof a.subscribe}const ca=a=>t(a)&&r(a.pipe)&&r(a._read)&&"boolean"===typeof a.readable&&t(a._readableState),da=a=>t(a)&&r(a.end)&&r(a._write)&&"boolean"===typeof a.writable&&t(a._writableState);function ea(a){a=Number(a);return isNaN(a)?0:0!==a&&isFinite(a)?(0<a?1:-1)*Math.floor(Math.abs(a)):a};const fa=Math.pow(2,53)-1;class z extends Error{constructor(a="The operation has been aborted"){super(a);Object.setPrototypeOf(this,z.prototype);Error.captureStackTrace(this,this.constructor);this.name="AbortError"}get [Symbol.toStringTag](){return"AbortError"}}function A(a){if(a&&a.aborted)throw new z;}Object.defineProperty(z,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return t(a)&&("AbortError"===a.constructor.name||"AbortError"===a[Symbol.toStringTag])}});class B{async forEach(a,b,c){const d=c?new ha(this,c):this;let e=0;for await(const g of d)await a.call(b,g,e++,c)}B(...a){let b=-1;const c=a.length;let d=this;for(;++b<c;)d=a[b](B.as(d));return d}static from(a,b=m,c){b=h(b,c);if(y(a)||t(a)&&r(a[Symbol.asyncIterator]))return new D(a,b);if(t(a)&&r(a.then))return new ia(a,b);if(ba(a))return new ja(a,b);if(x(a))return new E(a,b);if(aa(a))return new D({[Symbol.asyncIterator]:()=>a},b);throw new TypeError("Input type not supported");}static as(a){return a instanceof
B?a:"string"===typeof a?new E([a],m):y(a)||t(a)&&r(a[Symbol.asyncIterator])?new D(a,m):t(a)&&r(a.then)?new ia(a,m):ba(a)?new ja(a,m):x(a)?new E(a,m):new E([a],m)}}B.prototype[Symbol.toStringTag]="AsyncIterableX";Object.defineProperty(B,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"AsyncIterableX"!==a[Symbol.toStringTag])}});
function ka(a,b){if(a.L)throw Error("AsyncSink already ended");if(0<a.G.length){const {resolve:c,reject:d}=a.G.shift();"error"===b.type?d(b.error):c({done:!1,value:b.value})}else a.Y.push(b)}
class la{constructor(){this.L=!1;this.Y=[];this.G=[]}[Symbol.asyncIterator](){return this}write(a){ka(this,{type:"value",value:a})}error(a){ka(this,{type:"error",error:a})}next(){if(0<this.Y.length){const {type:a,value:b,error:c}=this.Y.shift();return"error"===a?Promise.reject(c):Promise.resolve({done:!1,value:b})}return this.L?Promise.resolve({done:!0}):new Promise((a,b)=>{this.G.push({resolve:a,reject:b})})}end(){for(;0<this.G.length;)this.G.shift().resolve({done:!0});this.L=!0}}
class E extends B{constructor(a,b){super();this.g=a;this.i=b}async*[Symbol.asyncIterator](){let a=0;const b=Math.min(Math.max(ea(this.g.length),0),fa);for(;a<b;)yield await this.i(this.g[a],a++)}}class D extends B{constructor(a,b){super();this.g=a;this.i=b}async*[Symbol.asyncIterator](){let a=0;for await(const b of this.g)yield await this.i(b,a++)}}class ia extends B{constructor(a,b){super();this.g=a;this.i=b}async*[Symbol.asyncIterator](){const a=await this.g;yield await this.i(a,0)}}
class ja extends B{constructor(a,b){super();this.ra=a;this.i=b}async*[Symbol.asyncIterator](a){function b(){c.error(new z)}A(a);const c=new la,d=this.ra.subscribe({next(g){c.write(g)},error(g){c.error(g)},complete(){c.end()}});a&&a.addEventListener("abort",b);let e=0;try{for(let g;!(g=await c.next()).done;)A(a),yield await this.i(g.value,e++)}finally{a&&a.removeEventListener("abort",b),d.unsubscribe()}}}
class ha{constructor(a,b){this.g=a;this.W=b}[Symbol.asyncIterator](){return this.g[Symbol.asyncIterator](this.W)}}try{(a=>{if(!a){B.prototype.pipe=function(...c){let d=-1;const e=c.length;let g=this,k;for(;++d<e;)if(k=c[d],"function"===typeof k)g=k(B.as(g));else if(da(k))return{end:c=!0}=c[d+1]||{},ca(g)?g.B(k,{end:c}):B.as(g).Aa(b(k)).B(k,{end:c});return g};var b=(c,d=c.wa||{za:!0})=>d}})("object"===typeof window&&"object"===typeof document&&9===document.nodeType)}catch(a){};class H extends B{constructor(a,b){super();this.g=a;this.W=b}withAbort(a){return new H(this.g,a)}[Symbol.asyncIterator](){return this.g[Symbol.asyncIterator](this.W)}}function I(a,b){return b?new H(a,b):a};class ma extends B{constructor(a){super();this.g=a}[Symbol.asyncIterator](a){function b(){c.next().then(k=>{if(k.done)e=Promise.resolve({done:!0}),"waiting"===d.type&&d.Z.resolve(e);else{if("waiting"===d.type){const n=d.Z.resolve;d={type:"batching",values:[]};n({done:k.done,value:[k.value]})}else if("batching"===d.type)d.values.push(k.value);else throw Error(`Unhandled discriminated union member ${d}`);b()}},k=>{g=k;"waiting"===d.type&&d.Z.reject(k)})}A(a);const c=I(this.g,a)[Symbol.asyncIterator]();
let d={type:"batching",values:[]},e=null,g=null;b();return{next(){if(g)return Promise.reject(g);if("batching"===d.type&&0<d.values.length){const k=d.values;d.values=[];return Promise.resolve({done:!1,value:k})}if(e)return e;if("waiting"===d.type)throw Error("Previous `next()` is still in progress");return new Promise((k,n)=>{d={type:"waiting",Z:{resolve:k,reject:n}}})},return(k){return c.return?c.return(k).then(()=>({done:!0})):Promise.resolve({done:!0})}}}};class na extends B{constructor(a,b,c){super();this.g=a;this.h=b;this.ua=c}async*[Symbol.asyncIterator](a){A(a);const b=[];let c=0;for await(const d of I(this.g,a)){0===c%this.ua&&b.push([]);for(const e of b)e.push(d);0<b.length&&b[0].length===this.h&&(yield b.shift());c++}for(;0<b.length;)yield b.shift()}};class oa{constructor(){this.l=[]}clear(){this.l=[]}get count(){return this.l.length}get(a){return this.l[a]}push(a){this.l.push(a)}done(){}}
class pa{constructor(a){this.h=0;this.I=a;this.l=new Map}clear(){this.l.clear()}get count(){return this.h}get ea(){return this.I}set ea(a){this.I=a}done(){this.I--}get(a){if(!this.l.has(a))throw Error("Element no longer available in the buffer.");const b=this.l.get(a),c=b.value;0===--b.count&&this.l.delete(a);return c}push(a){this.l.set(this.h++,{value:a,count:this.I})}};class qa extends B{constructor(a){super();this.m=a}async*[Symbol.asyncIterator](a){A(a);a=await this.m(a);let b;for(;!(b=await a.next()).done;)yield b.value}};class J extends B{constructor(a,b){super();this.J=this.aa=null;this.ca=!1;this.g=a;this.K=b}[Symbol.asyncIterator](a){A(a);return this._getIterable(0)}async *_getIterable(a=0){--a;let b=!1;const c=this.K;try{do if(++a<c.count)yield c.get(a);else{if(this.ca)throw this.aa;null===this.J&&(this.J=this.g.next().then(d=>{this.J=null;d.done||c.push(d.value);return d}));({done:b}=await this.J.catch(d=>{this.aa=d;this.ca=!0;throw d;}));b||(yield c.get(a))}while(!b)}finally{c.done()}}}
function ra(a=-1,b){return function(c){return b?new qa(()=>b(ra(a)(c))[Symbol.asyncIterator]()):-1===a?new J(c[Symbol.asyncIterator](),new oa):new J(c[Symbol.asyncIterator](),new pa(a))}};async function K(a){"function"===typeof a.return&&await a.return()};class sa extends B{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){A(a);let b=null,c=!1;for(const d of this.g){const e=I(d,a)[Symbol.asyncIterator]();b=null;for(c=!1;;){let g={};try{const {done:k,value:n}=await e.next();if(k){await K(e);break}g=n}catch(k){b=k;c=!0;await K(e);break}yield g}if(!c)break}if(c)throw b;}};function ta(a){return null===a||"object"!==typeof a&&"function"!==typeof a}const ua=new WeakMap;
function L(a){let b;return(new Promise((c,d)=>{b={resolve:c,reject:d};for(const e of a){if(ta(e)){Promise.resolve(e).then(c,d);continue}let g=ua.get(e);void 0===g?(g={D:new Set([b]),$:!1},ua.set(e,g),Promise.resolve(e).then(k=>{for(const {resolve:n}of g.D)n(k);g.D.clear();g.$=!0},k=>{for(const {reject:n}of g.D)n(k);g.D.clear();g.$=!0})):g.$?Promise.resolve(e).then(c,d):g.D.add(b)}})).finally(()=>{for(const c of a)ta(c)||ua.get(c).D.delete(b)})};const va=new Promise(()=>{});function wa(a,b){return a.then(c=>({value:c,index:b}))}
class xa extends B{constructor(a){super();this.v=a}async*[Symbol.asyncIterator](a){A(a);const b=this.v.length,c=Array(b),d=Array(b);let e=!1;const g=Array(b),k=Array(b);let n=b;k.fill(!1);for(let p=0;p<b;p++){const q=I(this.v[p],a)[Symbol.asyncIterator]();c[p]=q;d[p]=wa(q.next(),p)}for(;0<n;){a=L(d);const {value:{value:p,done:q},index:w}=await a;if(q)d[w]=va,n--;else if(g[w]=p,k[w]=!0,d[w]=wa(c[w].next(),w),e||=k.every(l))yield g}}};class ya extends B{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){A(a);for(const b of this.g)for await(const c of I(b,a))yield c}};class za extends B{async*[Symbol.asyncIterator](a){A(a)}};new Promise(()=>{});const Aa="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;class Ba extends B{constructor(a){super();this.da=a}[Symbol.asyncIterator](){const a=this.da,b=a.getReader();return Ca(a,b,Da(b))}}class Ea extends Ba{[Symbol.asyncIterator](){var a=this.da;let b;try{b=a.getReader({mode:"byob"})}catch(c){return super[Symbol.asyncIterator]()}a=Ca(a,b,Fa(b));a.next();return a}}
async function*Ca(a,b,c){let d=!1;try{yield*c}catch(e){(d=!0,b)&&await b.cancel(e)}finally{if(b&&(d||await b.cancel(),a.locked))try{b.closed.catch(()=>{}),b.releaseLock()}catch(e){}}}async function*Da(a){let b;for(;!(b=await a.read()).done;)yield b.value}async function*Fa(a){var b;for(b=yield null;!(b=await Ga(a,b)).done;)b=yield b.value}
async function Ga(a,b){let c;if("number"===typeof b)c=new ArrayBuffer(b);else if(b instanceof ArrayBuffer)b=(c=b).byteLength;else if(b instanceof Aa)b=(c=b).byteLength;else return{done:!0,value:void 0};return await Ha(a,c,0,b)}async function Ha(a,b,c,d){if(c>=d)return{done:!1,value:new Uint8Array(b,0,d)};const {done:e,value:g}=await a.read(new Uint8Array(b,c,d-c));return(c+=g.byteLength)<d&&!e?await Ha(a,g.buffer,c,d):{done:e,value:new Uint8Array(g.buffer,0,c)}}
function Ia(a,b){return b&&"byob"===b.mode?new Ea(a):new Ba(a)};function N(a,b){return new Promise((c,d)=>{function e(){clearTimeout(g);d(new z)}b&&b.aborted&&d(new z);const g=setTimeout(()=>{if(b&&(b.removeEventListener("abort",e),b.aborted)){e();return}c()},a);b&&b.addEventListener("abort",e,{once:!0})})};async function O(a,b){return a===b||"number"===typeof a&&"number"===typeof b&&isNaN(a)&&isNaN(b)};class Ja extends B{constructor(a){super();this.s=a}async*[Symbol.asyncIterator](a){A(a);let b=0;for(;;)await N(this.s,a),yield b++}};const Ka=new Promise(()=>{});function La(a,b){return a.then(c=>({value:c,index:b}))}class Ma extends B{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){A(a);const b=this.g.length,c=Array(b),d=Array(b);let e=b;for(let g=0;g<b;g++){const k=I(this.g[g],a)[Symbol.asyncIterator]();c[g]=k;d[g]=La(k.next(),g)}for(;0<e;){a=L(d);const {value:{done:g,value:k},index:n}=await a;g?(d[n]=Ka,e--):(d[n]=La(c[n].next(),n),yield k)}}}function Na(a,...b){return new Ma([a,...b])};class Oa extends B{constructor(){var a=[Pa];super();this.o=a}async*[Symbol.asyncIterator](a){A(a);for(const b of this.o)yield b}};function Qa(a,b){return a.then(c=>({value:c,index:b}))}class Ra extends B{constructor(a){super();this.v=a}async*[Symbol.asyncIterator](a){A(a);var b=this.v,c=b.length;const d=Array(c);var e=Array(c);for(let n=0;n<c;n++){const p=I(b[n],a)[Symbol.asyncIterator]();d[n]=p;e[n]=Qa(p.next(),n)}a=L(e);const {value:g,index:k}=await a;g.done||(yield g.value);a=d[k];for(b=0;b<c;b++)b!==k&&(e=d[b],e.return&&e.return());for(;!(c=await a.next()).done;)yield c.value}};async function Sa(a,b){A(b);const c=[];for await(const d of I(a,b))c.push(d);return c};class Ta extends J{constructor(a){super(a,new pa(0))}[Symbol.asyncIterator](a){A(a);this.K.ea++;return this._getIterable(this.K.count)[Symbol.asyncIterator]()}}function Ua(a){return function(b){return a?new qa(async()=>a(Ua()(b))[Symbol.asyncIterator]()):new Ta(b[Symbol.asyncIterator]())}};function Va(a,b,c=0,d=b.byteLength){const e=a.byteLength;a=new Uint8Array(a.buffer,a.byteOffset,e);b=new Uint8Array(b.buffer,b.byteOffset,Math.min(d,e,b.buffer.byteLength-b.byteOffset));a.set(b,c);return b.byteLength}class Wa{constructor(a){this.g=a}async cancel(){const a=this.g;a&&a.return&&await a.return();this.g=null}}class Xa extends Wa{async pull(a){var b=this.g;if(b&&(b=await b.next(a.desiredSize),!b.done))return a.enqueue(b.value);a.close()}}
class Ya extends Wa{constructor(a,b={}){super(a);this.type="bytes";this.autoAllocateChunkSize=b.autoAllocateChunkSize;this.xa=new Xa(a)}async pull(a){if(!a.byobRequest)return await this.xa.pull(a);if(this.g){const b=a.byobRequest.view,{done:c,value:d}=await this.g.next(b);if(!c){if("number"===typeof d)return a.byobRequest.respond(d);if(ArrayBuffer.isView(d))return d.buffer===b.buffer?a.byobRequest.respondWithNewView(d):a.byobRequest.respond(Va(b,d))}}a.close()}}
const Za=(()=>{let a,b,c=(e,g)=>{class k extends ReadableStream{[Symbol.asyncIterator](){return Ia(this)[Symbol.asyncIterator]()}}class n extends ReadableStream{[Symbol.asyncIterator](){return Ia(this,{mode:"byob"})[Symbol.asyncIterator]()}}a=n;b=k;c=d;return d(e,g)};const d=(e,g)=>e instanceof Ya?new a(e,g):new b(e,g);return(e,g)=>c(e,g)})();function P(a,b){return b&&"type"in b&&"bytes"===b.type?Za(new Ya(a[Symbol.asyncIterator](),b),b):Za(new Xa(a[Symbol.asyncIterator]()),b)}B.prototype.tee=function(){return bb(this).tee()};
B.prototype.pipeTo=function(a,b){return bb(this).pipeTo(a,b)};B.prototype.pipeThrough=function(a,b){return bb(this).pipeThrough(a,b)};function bb(a){return a.fa||(a.fa=a.B(Ua(),P))}B.prototype.toDOMStream=function(a){return a?P(this,a):P(this)};const Q=()=>{};function cb(a,b,c){return a&&"object"===typeof a?{next:r(a.next)?d=>a.next(d):Q,error:r(a.error)?d=>a.error(d):Q,complete:r(a.complete)?()=>a.complete():Q}:{next:r(a)?a:Q,error:r(b)?b:Q,complete:r(c)?c:Q}};class db extends B{constructor(a,b){super();this.ja=a;this.g=b}async*[Symbol.asyncIterator](a){for(A(a);await this.ja(a);)for await(const b of I(this.g,a))yield b}};class eb extends B{constructor(a){super();this.v=a}async*[Symbol.asyncIterator](a){A(a);const b=this.v.length,c=this.v.map(d=>I(d,a)[Symbol.asyncIterator]());for(;0<b;){const d=Array(b);for(let e=-1;++e<b;){const {value:g,done:k}=await c[e].next();if(k){await Promise.all(c.map(K));return}d[e]=g}yield d}}};class fb extends B{constructor(a,b,c){super();this.g=a;this.i=b;this.A=c}async*[Symbol.asyncIterator](a){A(a);let b=0;for await(const c of I(this.g,a))yield await this.i.call(this.A,c,b++,a)}}function gb(a,b){return function(c){return new fb(c,a,b)}};const hb={},Pa={};class ib extends B{constructor(a,b,c){super();this.source=a;this.bufferSize=b;this.ya=c}async*[Symbol.asyncIterator](a){const b=[];var c=(new Ja(this.ya)).B(gb(()=>hb));c=Na(new ya([this.source,new Oa]),c);for await(const d of I(c,a)){if(d===Pa)break;d!==hb&&b.push(d);if(b.length>=this.bufferSize||b.length&&d===hb)yield b.slice(),b.length=0}b.length&&(yield b)}};class jb extends B{constructor(a,b){super();this.g=a;this.oa=b}async*[Symbol.asyncIterator](a){A(a);let b,c=!1;const d=I(this.g,a)[Symbol.asyncIterator]();for(;;){let e={};try{if(e=await d.next(),e.done){await K(d);break}}catch(g){b=await this.oa(g,a);c=!0;await K(d);break}yield e.value}if(c)for await(const e of I(b,a))yield e}};class kb extends B{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){A(a);for await(const b of I(this.g,a))for await(const c of I(b,a))yield c}};class lb extends B{constructor(a,b,c){super();this.g=a;this.i=b;this.A=c}async*[Symbol.asyncIterator](a){A(a);let b=0;const c=this.A,d=this.i;for await(const g of I(this.g,a)){var e=d.call(c,g,b++,a);e=t(e)&&r(e.then)?await e:e;for await(const k of I(B.as(e),a))yield k}}};class mb extends B{constructor(a,b){super();this.g=a;this.X=b}async*[Symbol.asyncIterator](a){A(a);let b=!1,c=()=>{},d=()=>{},e=new Promise((g,k)=>{d=g;c=k});for((async()=>{let g=null;const k=n=>{g=null;d(n);e=new Promise((p,q)=>{d=p;c=q})};a&&a.addEventListener("abort",()=>{b=!0;g&&clearTimeout(g);g=null;c(new z)},{once:!0});try{let n;const p=this.g[Symbol.asyncIterator](a);for(;!b&&!(n=await p.next()).done&&!b;)g&&clearTimeout(g),g=setTimeout(k,this.X,n.value)}catch(n){c(n)}b=!0})();!b;)yield await e}}
;class nb extends B{constructor(a,b){super();this.g=a;this.ka=b}async*[Symbol.asyncIterator](a){A(a);let b=1;for await(const c of I(this.g,a))b=2,yield c;1===b&&(yield this.ka)}};class ob extends B{constructor(a,b){super();this.g=a;this.s=b}async*[Symbol.asyncIterator](a){A(a);for await(const b of I(this.g,a))await N(this.s,a),yield b}};class pb extends B{constructor(a,b){super();this.g=a;this.s=b}async*[Symbol.asyncIterator](a){A(a);await N(this.s,a);for await(const b of I(this.g,a))yield b}};async function R(a,b,c){for(let d=0,e=a.length;d<e;d++)if(await c(b,a[d]))return d;return-1};class qb extends B{constructor(a,b,c){super();this.g=a;this.u=b;this.j=c}async*[Symbol.asyncIterator](a){A(a);const b=[];for await(const c of I(this.g,a)){const d=await this.u(c,a);-1===await R(b,d,this.j)&&(b.push(d),yield c)}}};class rb extends B{constructor(a,b,c){super();this.g=a;this.u=b;this.j=c}async*[Symbol.asyncIterator](a){A(a);let b,c=!1;for await(const d of I(this.g,a)){const e=await this.u(d,a);let g=!1;c&&(g=await this.j(b,e));c&&g||(c=!0,b=e,yield d)}}};class sb extends B{constructor(a,b){super();this.g=a;this.o=b}async*[Symbol.asyncIterator](a){A(a);for await(const b of I(this.g,a))yield b;for(const b of this.o)yield b}};class tb extends B{constructor(a,b,c){super();this.M=a;this.U=b;this.j=c}async*[Symbol.asyncIterator](a){A(a);const b=[];for await(const c of I(this.U,a))b.push(c);for await(const c of I(this.M,a))-1===await R(b,c,this.j)&&(b.push(c),yield c)}};class ub extends B{constructor(a,b){super();this.g=a;this.i=b}async*[Symbol.asyncIterator](a){A(a);const b=[this.g];for(;0<b.length;){var c=b.shift();for await(const d of I(c,a))c=await this.i(d,a),b.push(c),yield d}}};class vb extends B{constructor(a,b,c){super();this.g=a;this.F=b;this.A=c}async*[Symbol.asyncIterator](a){A(a);let b=0;for await(const c of I(this.g,a))await this.F.call(this.A,c,b++)&&(yield c)}};class wb extends B{constructor(a,b){super();this.g=a;this.ga=b}async*[Symbol.asyncIterator](a){A(a);try{for await(const b of I(this.g,a))yield b}finally{await this.ga()}}};const xb=new Promise(()=>{});function yb(a){return function(b){if(a.aborted&&b instanceof z)return xb;throw b;}}async function*zb(a,b,c,d){for await(const e of I(a,d))A(d),yield{type:c,index:b,value:e};return{type:c,index:b,value:void 0}}
class S extends B{constructor(a,b,c,d){super();this.g=a;this.i=b;this.va=c;this.A=d;this.ia=1}async*[Symbol.asyncIterator](a){function b(u){const v=$a[u-1].next();({[u-1]:u}=F);return v.catch(yb(u.signal))}function c(u){++d;const v=ab.pop()||d;p&&F[v-1]&&F[v-1].abort();F[v-1]=new AbortController;const G=F[v-1].signal;u=n.call(k,u,e++,G);const C=gc=>{$a[v-1]=zb(B.as(gc),v,1,G);return b(v)};M[v]=t(u)&&r(u.then)?u.then(C):C(u)}A(a);let d=0,e=0,g=!1;const k=this.A,n=this.i,p=this.va,q=this.ia,w=[],ab=
[],F=Array(isFinite(q)?q:0),$a=Array(isFinite(q)?q:0);a=zb(this.g,0,0,a);const M=[a.next()];try{for(;;){const {done:u=!1,value:{type:v,value:G,index:C}}=await L(M);if(u){M[C]=xb;switch(v){case 0:g=!0;break;case 1:for(--d,ab.push(C);d<q&&w.length;)c(w.shift())}if(g&&0===d+w.length)break}else switch(v){case 0:p&&(d=0);d<q?c(G):w.push(G);M[0]=a.next();break;case 1:yield G,M[C]=b(C)}}}finally{F.forEach(u=>{u?.abort()})}}};function Ab(a,b){return function(c){return new S(c,a,!1,b)}};function Bb(a=-1){a=0>a?Infinity:a;return function(b){return Ab(c=>t(c)&&r(c[Symbol.asyncIterator])?0<a?Bb(a-1)(c):c:[c])(b)}};async function Cb(a,b,c,d){const e=new Map;for await(const k of I(a,d)){var g=await b(k,d);a=e.get(g);e.has(g)||(a=[],e.set(g,a));g=await c(k,d);a.push(g)}return e};class Db extends B{constructor(a,b){super();this.key=a;this.g=b}async*[Symbol.asyncIterator](a){A(a);for(const b of this.g)yield b}}class Eb extends B{constructor(a,b,c){super();this.g=a;this.u=b;this.ma=c}async*[Symbol.asyncIterator](a){A(a);a=await Cb(this.g,this.u,this.ma,a);for(const [b,c]of a)yield new Db(b,c)}};class Fb extends B{constructor(a,b,c,d,e){super();this.R=a;this.N=b;this.S=c;this.O=d;this.T=e}async*[Symbol.asyncIterator](a){A(a);const b=await Cb(this.N,this.O,l,a);for await(const d of I(this.R,a)){var c=await this.S(d,a);c=b.has(c)?b.get(c):new za;yield await this.T(d,B.as(c),a)}}};class Gb extends B{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){A(a);for await(const b of I(this.g,a));}};class Hb extends B{constructor(a,b,c,d,e){super();this.R=a;this.N=b;this.S=c;this.O=d;this.T=e}async*[Symbol.asyncIterator](a){A(a);const b=await Cb(this.N,this.O,l,a);for await(const c of I(this.R,a)){const d=await this.S(c,a);if(b.has(d))for(const e of b.get(d))yield await this.T(c,e,a)}}};async function Ib(a,b,c,d){A(d);b=await R(a,b,c);if(-1===b)return!1;a.splice(b,1);return!0}class Jb extends B{constructor(a,b,c){super();this.M=a;this.U=b;this.j=c}async*[Symbol.asyncIterator](a){const b=[];for await(const c of I(this.U,a))b.push(c);for await(const c of I(this.M,a))await Ib(b,c,this.j,a)&&(yield c)}};function T(a,b){return a>b?1:a<b?-1:0};class Kb extends B{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){A(a);a=await Sa(this.g,a);const b=a.length,c=Array(b);for(let d=0;d<b;d++)c[d]=d;c.sort(this._getSorter(a));for(const d of c)yield a[d]}thenBy(a,b=T){return new U(this.g,a,b,!1,this)}thenByDescending(a,b=T){return new U(this.g,a,b,!0,this)}}
class U extends Kb{constructor(a,b,c,d,e){super(a);this.u=b;this.j=c;this.la=d;this.sa=e}_getSorter(a,b){const c=a.map(this.u),d=this.j,e=this.sa,g=this.la,k=(n,p)=>{const q=d(c[n],c[p]);return 0===q?b?b(n,p):n-p:g?-q:q};return e?e._getSorter(a,k):k}};class Lb extends B{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){A(a);let b,c=!1;for await(const d of I(this.g,a))c?yield[b,d]:c=!0,b=d}};function Mb(a,b){return c=>{var d=c;for(c=0;c<b;c++)if(d=d[a[c]],"undefined"===typeof d)return;return d}};class Nb extends B{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](a){A(a);if(-1===this.h)for(;;)for await(var b of I(this.g,a))yield b;else for(b=0;b<this.h;b++)for await(const c of I(this.g,a))yield c}};class V{forEach(a,b){a=h(a,b);b=0;for(const c of this)a(c,b++)}B(...a){let b=-1;const c=a.length;let d=this;for(;++b<c;)d=a[b](V.as(d));return d}static as(a){return a instanceof V?a:"string"===typeof a?new W([a],l):y(a)||x(a)?new W(a,l):new W([a],l)}static from(a,b=l,c){b=h(b,c);if(y(a)||x(a))return new W(a,b);if(aa(a))return new W({[Symbol.iterator]:()=>a},b);throw new TypeError("Input type not supported");}}V.prototype[Symbol.toStringTag]="IterableX";
Object.defineProperty(V,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"IterableX"!==a[Symbol.toStringTag])}});class W extends V{constructor(a,b){super();this.g=a;this.m=b}*[Symbol.iterator](){let a=0;if(y(this.g))for(var b of this.g)yield this.m(b,a++);else for(b=Math.min(Math.max(ea(this.g.length),0),fa);a<b;)yield this.m(this.g[a],a++)}}
try{(a=>{if(!a){V.prototype.pipe=function(...c){let d=-1;const e=c.length;let g=this,k;for(;++d<e;)if(k=c[d],"function"===typeof k)g=k(V.as(g));else if(da(k))return{end:c=!0}=c[d+1]||{},ca(g)?g.B(k,{end:c}):V.as(g).Aa(b(k)).B(k,{end:c});return g};var b=(c,d=c.wa||{za:!0})=>d}})("object"===typeof window&&"object"===typeof document&&9===document.nodeType)}catch(a){};class Ob extends V{constructor(a){super();this.o=a}*[Symbol.iterator](){yield*this.o}};class Pb extends V{constructor(a,b){super();this.g=a;this.h=b}*[Symbol.iterator](){if(-1===this.h)for(;;)for(var a of this.g)yield a;else for(a=0;a<this.h;a++)for(const b of this.g)yield b}};function Qb(a,b=-1){return new Pb(new Ob([a]),b)};class Rb extends B{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){A(a);const b=[];for await(const c of I(this.g,a))b.unshift(c);yield*b}};class Sb extends B{constructor(a,b){super();this.g=a;this.m=b.callback;this.H=b.hasOwnProperty("seed");this.V=b.seed}async*[Symbol.asyncIterator](a){A(a);let b=!1,c=this.V;const d=await Sa(this.g,a);for(let e=d.length-1;0<=e;e--){const g=d[e];(b||=this.H)?(c=await this.m(c,g,e,a),yield c):(c=g,b=!0)}}};class Tb extends B{constructor(a,b){super();this.g=a;this.m=b.callback;this.H=b.hasOwnProperty("seed");this.V=b.seed}async*[Symbol.asyncIterator](a){A(a);let b=0,c=!1,d=this.V;for await(const e of I(this.g,a))(c||=this.H)?(d=await this.m(d,e,b++,a),yield d):(d=e,c=!0,b++);1!==b||this.H||(yield d)}};class Ub extends B{constructor(a){super();this.pa={next(b){return a.next(b)}}}[Symbol.asyncIterator](a){A(a);return this.pa}};class Vb extends B{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](a){A(a);const b=[];for await(const c of I(this.g,a))b.push(c),b.length>this.h&&(yield b.shift())}};class Wb extends B{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](a){A(a);a=I(this.g,a)[Symbol.asyncIterator]();for(var b=this.h;0<b&&!(await a.next()).done;)b--;if(0>=b)for(;!(b=await a.next()).done;)yield b.value}};class Xb extends B{constructor(a,b){super();this.g=a;this.P=b}async*[Symbol.asyncIterator](a){A(a);let b=!1;this.P(a).then(()=>b=!0);for await(const c of I(this.g,a))b&&(yield c)}};class Yb extends B{constructor(a,b){super();this.g=a;this.F=b}async*[Symbol.asyncIterator](a){A(a);let b=!1,c=0;for await(const d of I(this.g,a))b||await this.F(d,c++,a)||(b=!0),b&&(yield d)}};class Zb extends B{constructor(a,b,c){super();this.g=a;this.ha=b;this.na=c}async*[Symbol.asyncIterator](a){A(a);a=I(this.g,a)[Symbol.asyncIterator]();for(var b=this.ha;0<b&&!(await a.next()).done;)b--;let c=this.na;if(0<c)for(;!(b=await a.next()).done&&(yield b.value,0!==--c););}};class $b extends B{constructor(a,b){super();this.g=a;this.o=b}async*[Symbol.asyncIterator](a){A(a);for(const b of this.o)yield b;for await(const b of I(this.g,a))yield b}};class ac extends B{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](a){A(a);if(0<this.h){const b=[];for await(const c of I(this.g,a))b.length>=this.h&&b.shift(),b.push(c);for(;0<b.length;)yield b.shift()}}};class bc extends B{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](a){A(a);let b=this.h;if(0<b)for await(const c of I(this.g,a))if(yield c,0===--b)break}};class cc extends B{constructor(a,b){super();this.g=a;this.P=b}async*[Symbol.asyncIterator](a){A(a);const b=this.P(a).then(()=>{});for(a=I(this.g,a)[Symbol.asyncIterator]();;){var c=a.next();c=await L([b,c]);if(void 0===c||c.done)break;yield c.value}}};class dc extends B{constructor(a,b){super();this.g=a;this.F=b}async*[Symbol.asyncIterator](a){A(a);let b=0;for await(const c of I(this.g,a)){if(!await this.F(c,b++,a))break;yield c}}};class ec extends B{constructor(a,b){super();this.g=a;this.C=b}async*[Symbol.asyncIterator](a){A(a);for(a=I(this.g,a)[Symbol.asyncIterator]();;){let b;try{b=await a.next()}catch(c){if(c instanceof z)throw c;this.C.error&&await this.C.error(c);throw c;}if(b.done){this.C.complete&&await this.C.complete();break}this.C.next&&await this.C.next(b.value);yield b.value}}};class fc extends B{constructor(a,b){super();this.g=a;this.X=b}async*[Symbol.asyncIterator](a){A(a);let b;for await(const c of I(this.g,a))if(a=Date.now(),!b||a-b>this.X)b=a,yield c}};class hc extends B{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){A(a);let b=Date.now();for await(const c of I(this.g,a)){a=Date.now();const d=a-b;b=a;yield{value:c,Ba:d}}}};class X extends Error{constructor(a="Timeout has occurred"){super(a);Object.setPrototypeOf(this,X.prototype);Error.captureStackTrace(this,this.constructor);this.name="TimeoutError"}get [Symbol.toStringTag](){return"TimeoutError"}}Object.defineProperty(X,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return t(a)&&("TimeoutError"===a.constructor.name||"TimeoutError"===a[Symbol.toStringTag])}});
class ic extends B{constructor(a,b){super();this.g=a;this.s=b}async*[Symbol.asyncIterator](a){A(a);const b=I(this.g,a)[Symbol.asyncIterator]();for(;;){const {type:c,value:d}=await L([b.next().then(e=>({type:"value",value:e})),N(this.s,a).then(()=>({type:"error"}))]);if("error"===c)throw new X;if(!d||d.done)break;yield d.value}}};class jc extends B{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){A(a);for await(const b of I(this.g,a))yield{time:Date.now(),value:b}}};class kc extends B{constructor(a,b,c){super();this.qa=a;this.ta=b;this.j=c}async*[Symbol.asyncIterator](a){A(a);const b=[];for await(const c of I(this.qa,a))-1===await R(b,c,this.j)&&(b.push(c),yield c);for await(const c of I(this.ta,a))-1===await R(b,c,this.j)&&(b.push(c),yield c)}};const lc=new Promise(()=>{});function Y(a,b){return a.then(c=>({value:c,index:b}))}
class mc extends B{constructor(a,b){super();this.g=a;this.ba=b}async*[Symbol.asyncIterator](a){A(a);const b=this.ba.length;var c=b+1;const d=Array(c);c=Array(c);let e=!1;const g=Array(b),k=Array(b);g.fill(!1);for(let n=0;n<b;n++){const p=I(this.ba[n],a)[Symbol.asyncIterator]();d[n]=p;c[n]=Y(p.next(),n)}a=I(this.g,a)[Symbol.asyncIterator]();d[b]=a;for(c[b]=Y(a.next(),b);;){a=L(c);const {value:{value:n,done:p},index:q}=await a;if(q===b){if(p)break;c[q]=Y(d[q].next(),q);e&&(yield[n,...k])}else p?c[q]=
lc:(k[q]=n,g[q]=!0,e=g.every(l),c[q]=Y(d[q].next(),q))}}};var Z={};Z.BatchAsyncIterable=ma;Z.BufferAsyncIterable=na;Z.CatchWithAsyncIterable=jb;Z.ConcatAllAsyncIterable=kb;Z.DebounceAsyncIterable=mb;Z.DefaultIfEmptyAsyncIterable=nb;Z.DelayAsyncIterable=pb;Z.DelayEachAsyncIterable=ob;Z.DistinctAsyncIterable=qb;Z.DistinctUntilChangedAsyncIterable=rb;Z.EndWithAsyncIterable=sb;Z.ExceptAsyncIterable=tb;Z.ExpandAsyncIterable=ub;Z.FilterAsyncIterable=vb;Z.FinallyAsyncIterable=wb;Z.GroupByAsyncIterable=Eb;Z.GroupJoinAsyncIterable=Fb;Z.GroupedAsyncIterable=Db;
Z.IgnoreElementsAsyncIterable=Gb;Z.IntersectAsyncIterable=Jb;Z.JoinAsyncIterable=Hb;Z.MapAsyncIterable=fb;Z.MemoizeAsyncBuffer=J;Z.OrderedAsyncIterableBaseX=Kb;Z.OrderedAsyncIterableX=U;Z.PairwiseAsyncIterable=Lb;Z.RepeatAsyncIterable=Nb;Z.ReverseAsyncIterable=Rb;Z.ScanAsyncIterable=Tb;Z.ScanRightAsyncIterable=Sb;Z.SkipAsyncIterable=Wb;Z.SkipLastAsyncIterable=Vb;Z.SkipUntilAsyncIterable=Xb;Z.SkipWhileAsyncIterable=Yb;Z.SliceAsyncIterable=Zb;Z.StartWithAsyncIterable=$b;Z.TakeAsyncIterable=bc;
Z.TakeLastAsyncIterable=ac;Z.TakeUntilAsyncIterable=cc;Z.TakeWhileAsyncIterable=dc;Z.TapAsyncIterable=ec;Z.ThrottleAsyncIterable=fc;Z.TimeIntervalAsyncIterable=hc;Z.TimeoutAsyncIterable=ic;Z.TimeoutError=X;Z.TimestampAsyncIterable=jc;Z.UnionAsyncIterable=kc;Z.WithAbortAsyncIterable=H;Z.WithLatestFromAsyncIterable=mc;Z.batch=function(){return function(a){return new ma(a)}};Z.buffer=function(a,b){let c=b;null==c&&(c=a);return function(d){return new na(d,a,c)}};
Z.bufferCountOrTime=function(a,b){return function(c){return new ib(c,a,b)}};Z.catchError=function(a){return function(b){return new jb(b,a)}};Z.combineLatestWith=function(...a){return function(b){return new xa([b,...a])}};Z.concatAll=function(){return function(a){return new kb(a)}};Z.concatMap=function(a,b){return function(c){return new lb(c,a,b)}};Z.concatWith=function(...a){return function(b){return new ya([b,...a])}};Z.debounce=function(a){return function(b){return new mb(b,a)}};
Z.defaultIfEmpty=function(a){return function(b){return new nb(b,a)}};Z.delay=function(a){return function(b){return new pb(b,a)}};Z.delayEach=function(a){return function(b){return new ob(b,a)}};Z.distinct=function(a){return function(b){const {keySelector:c=m,comparer:d=O}=a||{};return new qb(b,c,d)}};Z.distinctUntilChanged=function(a){return function(b){const {keySelector:c=m,comparer:d=O}=a||{};return new rb(b,c,d)}};Z.doWhile=function(a){return function(b){return new ya([b,new db(a,b)])}};
Z.endWith=function(...a){return function(b){return new sb(b,a)}};Z.except=function(a,b=O){return function(c){return new tb(c,a,b)}};Z.expand=function(a){return function(b){return new ub(b,a)}};Z.filter=function(a,b){return function(c){return new vb(c,a,b)}};Z.finalize=function(a){return function(b){return new wb(b,a)}};Z.flat=Bb;Z.flatMap=Ab;Z.groupBy=function(a,b=m){return function(c){return new Eb(c,a,b)}};Z.groupJoin=function(a,b,c,d){return function(e){return new Fb(e,a,b,c,d)}};
Z.ignoreElements=function(){return function(a){return new Gb(a)}};Z.innerJoin=function(a,b,c,d){return function(e){return new Hb(e,a,b,c,d)}};Z.intersect=function(a,b=O){return function(c){return new Jb(c,a,b)}};Z.map=gb;Z.memoize=ra;Z.mergeAll=function(){return function(a){return new S(a,b=>b,!1)}};Z.mergeWith=function(...a){return function(b){return new Ma([b,...a])}};Z.orderBy=function(a,b=T){return function(c){return new U(c,a,b,!1)}};
Z.orderByDescending=function(a,b=T){return function(c){return new U(c,a,b,!0)}};Z.pairwise=function(){return function(a){return new Lb(a)}};Z.pluck=function(...a){return function(b){return gb(Mb(a,a.length))(b)}};Z.publish=Ua;Z.raceWith=function(...a){return function(b){return new Ra([b,...a])}};Z.repeat=function(a=-1){return function(b){return new Nb(b,a)}};Z.retry=function(a=-1){return function(b){return new sa(Qb(b,a))}};Z.reverse=function(){return function(a){return new Rb(a)}};
Z.scan=function(a){return function(b){return new Tb(b,a)}};Z.scanRight=function(a){return function(b){return new Sb(b,a)}};Z.share=function(a){return function(b){return a?new qa(async c=>(await a(new Ub(b[Symbol.asyncIterator](c)),c))[Symbol.asyncIterator](c)):new Ub(b[Symbol.asyncIterator]())}};Z.skip=function(a){return function(b){return new Wb(b,a)}};Z.skipLast=function(a){return function(b){return new Vb(b,a)}};Z.skipUntil=function(a){return function(b){return new Xb(b,a)}};
Z.skipWhile=function(a){return function(b){return new Yb(b,a)}};Z.slice=function(a,b=Infinity){return function(c){return new Zb(c,a,b)}};Z.startWith=function(...a){return function(b){return new $b(b,a)}};Z.switchAll=function(){return function(a){return new S(a,b=>b,!0)}};Z.switchMap=function(a,b){return function(c){return new S(c,a,!0,b)}};Z.take=function(a){return function(b){return new bc(b,a)}};Z.takeLast=function(a){return function(b){return new ac(b,a)}};
Z.takeUntil=function(a){return function(b){return new cc(b,a)}};Z.takeWhile=function(a){return function(b){return new dc(b,a)}};Z.tap=function(a,b,c){return function(d){return new ec(d,cb(a,b,c))}};Z.thenBy=function(a,b=T){return function(c){return new U(c.g,a,b,!1,c)}};Z.thenByDescending=function(a,b=T){return function(c){return new U(c.g,a,b,!0,c)}};Z.throttle=function(a){return function(b){return new fc(b,a)}};Z.timeInterval=function(){return function(a){return new hc(a)}};
Z.timeout=function(a){return function(b){return new ic(b,a)}};Z.timestamp=function(){return function(a){return new jc(a)}};Z.toDOMStream=function(a){return function(b){return P(b,a)}};Z.union=function(a,b=O){return function(c){return new kc(c,a,b)}};Z.withAbort=function(a){return function(b){return new H(b,a)}};Z.withLatestFrom=function(...a){return function(b){return new mc(b,a)}};Z.wrapWithAbort=I;Z.zipWith=function(...a){return function(b){return new eb([b,...a])}};f.prototype[Symbol.toStringTag]="__await";Object.defineProperty(f,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"__await"!==a[Symbol.toStringTag])}});Object.assign(arguments[0],Z);}.bind(this))));

//# sourceMappingURL=Ix.dom.asynciterable.operators.esnext.min.js.map

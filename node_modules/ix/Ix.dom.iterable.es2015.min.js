(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
    typeof define === 'function' && define.amd ? define(['IxIterable'], factory) :
    (factory(global.IxIterable = global.IxIterable || {}));
}(this, (function (exports) {function g(a){return this instanceof g?this:new g(a)};function k(a){return a}async function l(a){return a};function p(a,b){return"undefined"===typeof b?a:function(c,d){return a.call(b,c,d)}};const q=a=>"function"===typeof a,r=a=>null!=a&&Object(a)===a;function u(a){return r(a)&&"number"===typeof a.length}function v(a){return null!=a&&q(a[Symbol.iterator])}function w(a){return r(a)&&!q(a[Symbol.iterator])&&q(a.next)}function x(a){return null!=a&&Object(a)===a&&"function"===typeof a.subscribe}const y=a=>r(a)&&q(a.pipe)&&q(a._read)&&"boolean"===typeof a.readable&&r(a._readableState),z=a=>r(a)&&q(a.end)&&q(a._write)&&"boolean"===typeof a.writable&&r(a._writableState);function A(a){a=Number(a);return isNaN(a)?0:0!==a&&isFinite(a)?(0<a?1:-1)*Math.floor(Math.abs(a)):a};const B=Math.pow(2,53)-1;class C{forEach(a,b){a=p(a,b);b=0;for(const c of this)a(c,b++)}pipe(...a){let b=-1;const c=a.length;let d=this;for(;++b<c;)d=a[b](C.as(d));return d}static as(a){return a instanceof C?a:"string"===typeof a?new D([a],k):v(a)||u(a)?new D(a,k):new D([a],k)}static from(a,b=k,c){b=p(b,c);if(v(a)||u(a))return new D(a,b);if(w(a))return new D({[Symbol.iterator]:()=>a},b);throw new TypeError("Input type not supported");}}C.prototype[Symbol.toStringTag]="IterableX";
Object.defineProperty(C,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"IterableX"!==a[Symbol.toStringTag])}});class D extends C{constructor(a,b){super();this.g=a;this.m=b}*[Symbol.iterator](){let a=0;if(v(this.g))for(var b of this.g)yield this.m(b,a++);else for(b=Math.min(Math.max(A(this.g.length),0),B);a<b;)yield this.m(this.g[a],a++)}}
try{(a=>{if(!a){C.prototype.pipe=function(...c){let d=-1;const e=c.length;let f=this,h;for(;++d<e;)if(h=c[d],"function"===typeof h)f=h(C.as(f));else if(z(h))return{end:c=!0}=c[d+1]||{},y(f)?f.pipe(h,{end:c}):C.as(f).V(b(h)).pipe(h,{end:c});return f};var b=(c,d=c.S||{U:!0})=>d}})("object"===typeof window&&"object"===typeof document&&9===document.nodeType)}catch(a){};function E(a){"function"===typeof a.return&&a.return()};class F extends C{constructor(a){super();this.g=a}*[Symbol.iterator](){let a=null,b=!1;for(const c of this.g){const d=c[Symbol.iterator]();a=null;for(b=!1;;){let e={};try{const {done:f,value:h}=d.next();if(f){E(d);break}e=h}catch(f){a=f;b=!0;E(d);break}yield e}if(!b)break}if(b)throw a;}};class G extends C{constructor(a){super();this.g=a}*[Symbol.iterator](){for(const a of this.g)yield*a}};class aa extends C{constructor(a){super();this.m=a}[Symbol.iterator](){return this.m()}};class ba extends C{constructor(a){super();this.m=a}*[Symbol.iterator](){for(const a of this.m())yield a}}function H(a){return new ba(a)};class ca extends C{*[Symbol.iterator](){}}function I(){return new ca};class da extends C{constructor(a,b,c,d){super();this.M=a;this.D=b;this.N=c;this.P=d}*[Symbol.iterator](){for(let a=this.M;this.D(a);a=this.N(a))yield this.P(a)}};function J(a,b){return a===b||"number"===typeof a&&"number"===typeof b&&isNaN(a)&&isNaN(b)}function K(a,b){return a>b?1:a<b?-1:0};function L(a,b,c){let d=[];a=a[Symbol.iterator]();const {value:e,done:f}=a.next();if(f)throw Error("Sequence contains no elements");let h=b(e);d.push(e);for(var m;!(m=a.next()).done;){m=m.value;const n=b(m),t=c(n,h);0===t?d.push(m):0<t&&(d=[m],h=n)}return d};function M(...a){return new N(a)}class N extends C{constructor(a){super();this.L=a}*[Symbol.iterator](){yield*this.L}};class O extends C{constructor(a){super();this.g=a}*[Symbol.iterator](){for(const a of this.g){const b=a[Symbol.iterator]();for(;;){let c;try{c=b.next()}catch(d){break}if(c.done)break;yield c.value}}}};class ea extends C{constructor(a,b){super();this.J=a;this.i=b}*[Symbol.iterator](){for(let a=this.J,b=this.J+this.i;a<b;a++)yield a}};function P(a){const b=[];for(const c of a)b.push(c);return b};class fa extends C{constructor(a,b){super();this.g=a;this.i=b}*[Symbol.iterator](){if(-1===this.i)for(;;)for(var a of this.g)yield a;else for(a=0;a<this.i;a++)for(const b of this.g)yield b}};class ha extends C{constructor(a){super();this.j=a}*[Symbol.iterator](){throw this.j;}};class Q extends Error{constructor(a="The operation has been aborted"){super(a);Object.setPrototypeOf(this,Q.prototype);Error.captureStackTrace(this,this.constructor);this.name="AbortError"}get [Symbol.toStringTag](){return"AbortError"}}function R(a){if(a&&a.aborted)throw new Q;}Object.defineProperty(Q,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return r(a)&&("AbortError"===a.constructor.name||"AbortError"===a[Symbol.toStringTag])}});class S{async forEach(a,b,c){const d=c?new ia(this,c):this;let e=0;for await(const f of d)await a.call(b,f,e++,c)}pipe(...a){let b=-1;const c=a.length;let d=this;for(;++b<c;)d=a[b](S.as(d));return d}static from(a,b=l,c){b=p(b,c);if(v(a)||r(a)&&q(a[Symbol.asyncIterator]))return new T(a,b);if(r(a)&&q(a.then))return new ja(a,b);if(x(a))return new ka(a,b);if(u(a))return new U(a,b);if(w(a))return new T({[Symbol.asyncIterator]:()=>a},b);throw new TypeError("Input type not supported");}static as(a){return a instanceof
S?a:"string"===typeof a?new U([a],l):v(a)||r(a)&&q(a[Symbol.asyncIterator])?new T(a,l):r(a)&&q(a.then)?new ja(a,l):x(a)?new ka(a,l):u(a)?new U(a,l):new U([a],l)}}S.prototype[Symbol.toStringTag]="AsyncIterableX";Object.defineProperty(S,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"AsyncIterableX"!==a[Symbol.toStringTag])}});
function la(a,b){if(a.F)throw Error("AsyncSink already ended");if(0<a.u.length){const {resolve:c,reject:d}=a.u.shift();"error"===b.type?d(b.error):c({done:!1,value:b.value})}else a.G.push(b)}
class ma{constructor(){this.F=!1;this.G=[];this.u=[]}[Symbol.asyncIterator](){return this}write(a){la(this,{type:"value",value:a})}error(a){la(this,{type:"error",error:a})}next(){if(0<this.G.length){const {type:a,value:b,error:c}=this.G.shift();return"error"===a?Promise.reject(c):Promise.resolve({done:!1,value:b})}return this.F?Promise.resolve({done:!0}):new Promise((a,b)=>{this.u.push({resolve:a,reject:b})})}end(){for(;0<this.u.length;)this.u.shift().resolve({done:!0});this.F=!0}}
class U extends S{constructor(a,b){super();this.g=a;this.l=b}async*[Symbol.asyncIterator](){let a=0;const b=Math.min(Math.max(A(this.g.length),0),B);for(;a<b;)yield await this.l(this.g[a],a++)}}class T extends S{constructor(a,b){super();this.g=a;this.l=b}async*[Symbol.asyncIterator](){let a=0;for await(const b of this.g)yield await this.l(b,a++)}}class ja extends S{constructor(a,b){super();this.g=a;this.l=b}async*[Symbol.asyncIterator](){const a=await this.g;yield await this.l(a,0)}}
class ka extends S{constructor(a,b){super();this.O=a;this.l=b}async*[Symbol.asyncIterator](a){function b(){c.error(new Q)}R(a);const c=new ma,d=this.O.subscribe({next(f){c.write(f)},error(f){c.error(f)},complete(){c.end()}});a&&a.addEventListener("abort",b);let e=0;try{for(let f;!(f=await c.next()).done;)R(a),yield await this.l(f.value,e++)}finally{a&&a.removeEventListener("abort",b),d.unsubscribe()}}}
class ia{constructor(a,b){this.g=a;this.R=b}[Symbol.asyncIterator](){return this.g[Symbol.asyncIterator](this.R)}}try{(a=>{if(!a){S.prototype.pipe=function(...c){let d=-1;const e=c.length;let f=this,h;for(;++d<e;)if(h=c[d],"function"===typeof h)f=h(S.as(f));else if(z(h))return{end:c=!0}=c[d+1]||{},y(f)?f.pipe(h,{end:c}):S.as(f).V(b(h)).pipe(h,{end:c});return f};var b=(c,d=c.S||{U:!0})=>d}})("object"===typeof window&&"object"===typeof document&&9===document.nodeType)}catch(a){};class na{constructor(){this.A=this.i=0;this.s=new Map}clear(){this.s.clear()}get count(){return this.i}get H(){return this.A}set H(a){this.A=a}done(){this.A--}get(a){if(!this.s.has(a))throw Error("Element no longer available in the buffer.");const b=this.s.get(a),c=b.value;0===--b.count&&this.s.delete(a);return c}push(a){this.s.set(this.i++,{value:a,count:this.A})}};class oa extends C{constructor(a){super();this.o=!1;this.g=a;this.h=new na}*v(a){try{for(;;){let b=!1,c={};if(a>=this.h.count){if(!this.o)try{const d=this.g.next();if(b=!d.done)c=d.value}catch(d){this.j=d,this.o=!0}if(this.o){if(this.j)throw this.j;break}b&&this.h.push(c)}else b=!0;if(b)yield this.h.get(a);else break;a++}}finally{this.h.done()}}[Symbol.iterator](){this.h.H++;return this.v(this.h.count)[Symbol.iterator]()}}function qa(){return function(a){return new oa(a[Symbol.iterator]())}};class ra extends S{constructor(a){var b=new na;super();this.B=this.j=null;this.o=!1;this.g=a;this.h=b}[Symbol.asyncIterator](a){R(a);return this.v(0)}async *v(a=0){--a;let b=!1;const c=this.h;try{do if(++a<c.count)yield c.get(a);else{if(this.o)throw this.j;null===this.B&&(this.B=this.g.next().then(d=>{this.B=null;d.done||c.push(d.value);return d}));({done:b}=await this.B.catch(d=>{this.j=d;this.o=!0;throw d;}));b||(yield c.get(a))}while(!b)}finally{c.done()}}};class sa extends ra{[Symbol.asyncIterator](a){R(a);this.h.H++;return this.v(this.h.count)[Symbol.asyncIterator]()}}function ta(){return function(a){return new sa(a[Symbol.asyncIterator]())}};const ua="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;class va extends S{constructor(a){super();this.K=a}[Symbol.asyncIterator](){const a=this.K,b=a.getReader();return wa(a,b,xa(b))}}class ya extends va{[Symbol.asyncIterator](){var a=this.K;let b;try{b=a.getReader({mode:"byob"})}catch(c){return super[Symbol.asyncIterator]()}a=wa(a,b,za(b));a.next();return a}}
async function*wa(a,b,c){let d=!1;try{yield*c}catch(e){(d=!0,b)&&await b.cancel(e)}finally{if(b&&(d||await b.cancel(),a.locked))try{b.closed.catch(()=>{}),b.releaseLock()}catch(e){}}}async function*xa(a){let b;for(;!(b=await a.read()).done;)yield b.value}async function*za(a){var b;for(b=yield null;!(b=await Aa(a,b)).done;)b=yield b.value}
async function Aa(a,b){let c;if("number"===typeof b)c=new ArrayBuffer(b);else if(b instanceof ArrayBuffer)b=(c=b).byteLength;else if(b instanceof ua)b=(c=b).byteLength;else return{done:!0,value:void 0};return await Ba(a,c,0,b)}async function Ba(a,b,c,d){if(c>=d)return{done:!1,value:new Uint8Array(b,0,d)};const {done:e,value:f}=await a.read(new Uint8Array(b,c,d-c));return(c+=f.byteLength)<d&&!e?await Ba(a,f.buffer,c,d):{done:e,value:new Uint8Array(f.buffer,0,c)}}
function Ca(a,b){return b&&"byob"===b.mode?new ya(a):new va(a)};function Da(a,b,c=0,d=b.byteLength){const e=a.byteLength;a=new Uint8Array(a.buffer,a.byteOffset,e);b=new Uint8Array(b.buffer,b.byteOffset,Math.min(d,e,b.buffer.byteLength-b.byteOffset));a.set(b,c);return b.byteLength}class Ea{constructor(a){this.g=a}async cancel(){const a=this.g;a&&a.return&&await a.return();this.g=null}}class Fa extends Ea{async pull(a){var b=this.g;if(b&&(b=await b.next(a.desiredSize),!b.done))return a.enqueue(b.value);a.close()}}
class Ga extends Ea{constructor(a,b={}){super(a);this.type="bytes";this.autoAllocateChunkSize=b.autoAllocateChunkSize;this.T=new Fa(a)}async pull(a){if(!a.byobRequest)return await this.T.pull(a);if(this.g){const b=a.byobRequest.view,{done:c,value:d}=await this.g.next(b);if(!c){if("number"===typeof d)return a.byobRequest.respond(d);if(ArrayBuffer.isView(d))return d.buffer===b.buffer?a.byobRequest.respondWithNewView(d):a.byobRequest.respond(Da(b,d))}}a.close()}}
const Ha=(()=>{let a,b,c=(e,f)=>{class h extends ReadableStream{[Symbol.asyncIterator](){return Ca(this)[Symbol.asyncIterator]()}}class m extends ReadableStream{[Symbol.asyncIterator](){return Ca(this,{mode:"byob"})[Symbol.asyncIterator]()}}a=m;b=h;c=d;return d(e,f)};const d=(e,f)=>e instanceof Ga?new a(e,f):new b(e,f);return(e,f)=>c(e,f)})();function V(a,b){return b&&"type"in b&&"bytes"===b.type?Ha(new Ga(a[Symbol.asyncIterator](),b),b):Ha(new Fa(a[Symbol.asyncIterator]()),b)}S.prototype.tee=function(){return W(this).tee()};
S.prototype.pipeTo=function(a,b){return W(this).pipeTo(a,b)};S.prototype.pipeThrough=function(a,b){return W(this).pipeThrough(a,b)};function W(a){return a.C||(a.C=a.pipe(ta(),V))}S.prototype.toDOMStream=function(a){return a?V(this,a):V(this)};function X(a,b){return V(S.as(a),b)}C.prototype.tee=function(){return Y(this).tee()};C.prototype.pipeTo=function(a,b){return Y(this).pipeTo(a,b)};C.prototype.pipeThrough=function(a,b){return Y(this).pipeThrough(a,b)};function Y(a){return a.C||(a.C=a.pipe(qa(),X))}function Ia(a){return a?X(this,a):X(this)}C.prototype.toDOMStream=Ia;class Ja extends C{constructor(a,b){super();this.D=a;this.g=b}*[Symbol.iterator](){for(;this.D();)yield*this.g}};class Ka extends C{constructor(a){super();this.I=a}*[Symbol.iterator](){const a=this.I.length,b=this.I.map(c=>c[Symbol.iterator]());for(;0<a;){const c=Array(a);for(let d=-1;++d<a;){const e=b[d].next();if(e.done){b.forEach(E);return}c[d]=e.value}yield c}}};const La=C.as,Ma=C.from;var Z={};Z.CatchIterable=F;Z.ConcatIterable=G;Z.FromIterable=D;Z.IterableX=C;Z.OfIterable=N;Z.OnErrorResumeNextIterable=O;Z.ZipIterable=Ka;Z.as=La;Z.average=function(a,b){const {selector:c=k,thisArg:d}=b||{};let e=b=0;for(const f of a)b+=c.call(d,f),e++;if(0===e)throw Error("Empty collection");return b/e};Z.catchAll=function(a){return new F(a)};Z.catchError=function(...a){return new F(a)};Z.concat=function(...a){return new G(a)};
Z.count=function(a,b){const {thisArg:c,predicate:d=()=>!0}=b||{};b=0;for(const e of a)d.call(c,e,b)&&b++;return b};Z.create=function(a){return new aa(a)};Z.defer=H;Z.elementAt=function(a,b){for(const c of a){if(0===b)return c;b--}};Z.empty=I;Z.every=function(a,b){const {thisArg:c,predicate:d}=b;b=0;for(const e of a)if(!d.call(c,e,b++))return!1;return!0};Z.find=function(a,b){const {thisArg:c,predicate:d}=b;b=0;for(const e of a)if(d.call(c,e,b++))return e};
Z.findIndex=function(a,b){const {thisArg:c,predicate:d}=b;b=0;for(const e of a)if(d.call(c,e,b++))return b;return-1};Z.first=function(a,b){const {thisArg:c,predicate:d=()=>!0}=b||{};b=0;for(const e of a)if(d.call(c,e,b++))return e};Z.from=Ma;Z.generate=function(a,b,c,d){return new da(a,b,c,d)};Z.iif=function(a,b,c=I()){return H(()=>a()?b:c)};Z.includes=function(a,b,c=0){let d=0;Math.abs(c)&&(c=0);for(const e of a)if(d++>c&&J(e,b))return!0;return!1};
Z.isEmpty=function(a){for(const b of a)return!1;return!0};Z.last=function(a,b){const {thisArg:c,predicate:d=()=>!0}=b||{};b=0;let e;for(const f of a)d.call(c,f,b++)&&(e=f);return e};Z.max=function(a,b){const {comparer:c=K,selector:d=k}=b||{};a=a[Symbol.iterator]();var e=a.next();if(e.done)throw Error("Sequence contains no elements");for(b=d(e.value);!(e=a.next()).done;)e=d(e.value),0<c(e,b)&&(b=e);return b};Z.maxBy=function(a,b){const {comparer:c=K,selector:d}=b||{};return L(a,d,c)};
Z.min=function(a,b){const {comparer:c=K,selector:d=k}=b||{};a=a[Symbol.iterator]();var e=a.next();if(e.done)throw Error("Sequence contains no elements");for(b=d(e.value);!(e=a.next()).done;)e=d(e.value),0>c(e,b)&&(b=e);return b};Z.minBy=function(a,b){const {comparer:c=K,selector:d}=b||{};return L(a,d,(e,f)=>-c(e,f))};Z.of=M;Z.onErrorResumeNext=function(...a){return new O(a)};Z.range=function(a,b){return new ea(a,b)};
Z.reduce=function(a,b,c){var d="function"===typeof b?2<arguments.length?{callback:b,seed:c}:{callback:b}:b;const {seed:e,callback:f}=d;d=d.hasOwnProperty("seed");let h=0,m=!1,n=e;for(const t of a)(m||=d)?n=f(n,t,h++):(n=t,m=!0,h++);if(!d&&!m)throw Error("Sequence contains no elements");return n};
Z.reduceRight=function(a,b,c){var d="function"===typeof b?2<arguments.length?{callback:b,seed:c}:{callback:b}:b;const {seed:e,callback:f}=d;d=d.hasOwnProperty("seed");const h=P(a);let m=!1,n=e;for(let t=h.length-1;0<=t;t--){const pa=h[t];(m||=d)?n=f(n,pa,t):(n=pa,m=!0)}if(!d&&!m)throw Error("Sequence contains no elements");return n};Z.repeatValue=function(a,b=-1){return new fa(M(a),b)};
Z.sequenceEqual=function(a,b,c){({comparer:c=J}=c||{});a=a[Symbol.iterator]();b=b[Symbol.iterator]();let d,e;for(;!(d=a.next()).done;)if((e=b.next()).done||!c(d.value,e.value))return!1;return!!b.next().done};Z.single=function(a,b){const {thisArg:c,predicate:d=()=>!0}=b||{};let e;b=!1;let f=0;for(const h of a){if(b&&d.call(c,h,f++))throw Error("More than one element was found");d.call(c,h,f++)&&(e=h,b=!0)}return e};
Z.some=function(a,b){const {thisArg:c,predicate:d}=b;b=0;for(const e of a)if(d.call(c,e,b++))return!0;return!1};Z.sum=function(a,b){const {selector:c=k,thisArg:d}=b||{};b=0;for(const e of a)b+=c.call(d,e);return b};Z.throwError=function(a){return new ha(a)};Z.toArray=P;Z.toDOMStream=X;Z.toDOMStreamProto=Ia;Z.toMap=function(a,b){const {elementSelector:c=k,keySelector:d=k}=b||{};b=new Map;for(const e of a){a=c(e);const f=d(e);b.set(f,a)}return b};
Z.toSet=function(a){const b=new Set;for(const c of a)b.add(c);return b};Z.whileDo=function(a,b){return new Ja(b,a)};Z.zip=function(...a){return new Ka(a)};g.prototype[Symbol.toStringTag]="__await";Object.defineProperty(g,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"__await"!==a[Symbol.toStringTag])}});Object.assign(arguments[0],Z);}.bind(this))));

//# sourceMappingURL=Ix.dom.iterable.esnext.min.js.map
